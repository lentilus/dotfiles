### tmux sensible ###
set -s escape-time 0 #vim mode switching delay
set -g history-limit 50000
set -g display-time 4000 # tmux message timeout
set -g status-interval 5 # refresh status more often
set -g status-keys emacs
set -g mode-keys vi
set -g focus-events on
setw -g aggressive-resize on
### end sensible ###
# from vim checkhealth
# set-option -sa terminal-features ",$TERM:RGB"
# set -ga terminal-overrides ',xterm-256color:Tc'
# set -g default-terminal 'xterm-256color'

set -g default-terminal 'tmux-256color' # replace this with your custom term-info name
set -ga terminal-overrides ',*:Tc' # this is for 256 color
set -ga terminal-overrides '*:Ss=\E[%p1%d q:Se=\E[ q' # this is for the cursor shape
# custom prefix
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# window name
set-window-option -g automatic-rename on
set-option -g set-titles on

# better copy mode keybinds
bind-key -n C-b copy-mode
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# window splitting
bind -n M-H split-window -h -c "#{pane_current_path}"
bind -n M-V split-window -v -c "#{pane_current_path}"

# some rebinds
bind -n M-r source-file ~/.config/tmux/tmux.conf
bind -n M-q detach
unbind C-f
bind-key -n C-f run-shell "tmux neww ~/git/scripts/jump-tmux"

# update sway sock
set-option -g update-environment "SWAYSOCK"
set-option -g update-environment "SSH_AUTH_SOCK"

set-environment -g TMUX_PLUGIN_MANAGER_PATH "~/.local/tmux/plugins/"

# personal setup
source-file $HOME/.config/tmux/nvim.conf

if-shell '[ $COMPUTER = "personal"  ]' {
    source-file $HOME/.config/tmux/personal.conf
}

### tpm ###
set -g @plugin 'tmux-plugins/tpm'

# plugin configuration
source-file $HOME/.config/tmux/catppuccin.conf


# install tpm
if "test ! -d $HOME/.local/tmux/plugins/tpm" \
	"run 'git clone https://github.com/tmux-plugins/tpm $HOME/.local/tmux/plugins/tpm && $HOME/.local/tmux/plugins/tpm/scripts/install_plugins.sh'"

run '$HOME/.local/tmux/plugins/tpm/tpm'
